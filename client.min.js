var components=function(){"use strict";var n=t;function t(n){return function(t){return t==n}}t.fn=function(n){return"function"==typeof n},t.str=function(n){return"string"==typeof n},t.num=function(n){return"number"==typeof n},t.obj=function(n){return"object"==typeof n},t.lit=function(n){return n.constructor==Object},t.bol=function(n){return"boolean"==typeof n},t.truthy=function(n){return 1==!!n},t.falsy=function(n){return 0==!!n},t.arr=function(n){return n instanceof Array},t.null=function(n){return null===n},t.def=function(n){return void 0!==n},t.in=function(n){return function(t){return!!n&&(n.indexOf?~n.indexOf(t):t in n)}},t.promise=function(n){return n instanceof Promise},t.stream=function(n){return!(!n||!n.next)};var e={arr:function(n){return Array.prototype.slice.call(n,0)},obj:function(t){var e="id";return 1==arguments.length?(e=t,r):r.apply(this,arguments);function r(t,r,o){return 0===o&&(t={}),t[n.fn(e)?e(r,o):r[e]]=r,t}}};var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var o="undefined"!=typeof window,i=o?window:r,u=function(n){return c(n.class?n.class:n.prototype?n.prototype.render?n:n.prototype.connected?n:s(n):s(n),{raw:n})},c=Object.assign,s=function(n){return function(){function t(){}return t.prototype.render=function(){n.apply(this,arguments)},t}()},f=function(){var n,t,e=new Promise(function(e,r){n=e,t=r});return arguments.length&&n(arguments[0]),e.resolve=n,e.reject=t,e};var a,l,p=function n(t,e){return e instanceof Array&&(e=e.reduce(n,[])),(t=t||[]).concat(e)},d=function(n,t,e,r){return n.host&&n.host.nodeName&&(n=n.host),t.name&&(e=t,t=t.name),!function(n,t){return t in n}(n,t)&&Object.defineProperty(n,t,{value:e,writable:r}),n[t]},h=function(){},y=function(n){if(!(n=n.host&&n.host.nodeName?n.host:n).on){n.listeners={};!function n(t,e){return e=e||{},d(t=t||{},"emit",function(n,e,o){for(var i=t.on[n.split(".")[0]]||[],u=[],c=0;c<i.length;c++)i[c].ns&&o&&!o(i[c].ns)||u.push(r(i[c].isOnce?i.splice(c--,1)[0]:i[c],e));for(var c=0;c<t.on["*"].length;c++)u.push(r(t.on["*"][c],[n,e]));return u.reduce(p,[])},1),d(t,"once",function(n,e){return t.on(n,e,!0)},1),d(t,"off",function(n,e){return o(t.on[n]||[],e),e&&e.ns&&delete t.on[n]["$"+e.ns],t},1),d(t,"on",function(n,r,u){var c=n.split(".")[0],s=n.split(".")[1],f=t.on[c]=t.on[c]||[],a="function"==typeof r?r:0;return!a&&s?(a=t.on[c]["$"+s])?a:l(i(t,r)):a||s?a&&s?l((o(f,t.on[c]["$"+s]||-1),a)):!(!a||s)&&l(a):l(i(t,r));function l(n){return n.isOnce=u,n.type=c,s&&(t.on[c]["$"+(n.ns=s)]=n),f.push(n),(e.on||h)(n),n.next?n:t}},1),t.on["*"]=t.on["*"]||[],t;function r(n,e){return n.next?n.next(e):e instanceof Array?n.apply(t,e):n.call(t,e)}function o(n,t){for(var r=n.length;~--r;)t!=n[r]&&t!=n[r].fn&&t||(e.off||h)(n.splice(r,1)[0])}function i(t,e){var r=n((e=e||{}).base||f());return r.i=0,r.li=[],r.fn=e.fn,r.parent=t,r.source=e.fn?r.parent.source:r,r.on("stop",function(n){return r.type?r.parent.off(r.type,r):r.parent.off(r),r.reason=n}),r.each=function(n){var t=n.next?n:i(r,{fn:n});return r.li.push(t),t},r.pipe=function(n){return n(r)},r.map=function(n){return r.each(function(t,e,r){return r.next(n(t,e,r))})},r.filter=function(n){return r.each(function(t,e,r){return n(t,e,r)&&r.next(t)})},r.reduce=function(n,t){return r.each(function(e,r,o){return o.next(t=n(t,e,r,o))})},r.unpromise=function(){var n=i(r,{base:{},fn:function(t){return n.next(t)}});return r.li.push(n),n},r.next=function(n){return r.resolve&&r.resolve(n),r.li.length?r.li.map(function(t){return t.fn(n,t.i++,t)}):n},r.until=function(n){return(n.each||n.then).call(n,function(n){return r.source.emit("stop",n)}),r},r.off=function(n){return o(r.li,n),r},r.start=function(){return r.source.emit("start"),r},r[Symbol.asyncIterator]=function(){return{next:function(){return r.wait=new Promise(function(n){r.wait=!0,r.map(function(t,e,o){delete r.wait,r.off(o),n({value:t,done:!1})}),r.emit("pull",r)})}}},r}}(n,{on:function(e){var r=e.type.split(".").shift();n.listeners[r]||n.addEventListener(r,n.listeners[r]=function(n){return n.detail&&n.detail.emitted?0:t(r,n)})},off:function(t){n.on[t.type].length||(n.removeEventListener(t.type,n.listeners[t.type]),delete n.listeners[t.type])}});var t=n.emit;n.emit=function(e,r){var o=new CustomEvent(e,{detail:{params:r,emitted:!0},bubbles:!1,cancelable:!0});return n.dispatchEvent(o),t(e,o)}}},m=(function(n){var t={count:0},e=function(){},r=o?window.HTMLElement:function(){return function(){}}();n.exports=function(n,e){if(1==arguments.length&&(e=n,n="anon-"+t.count++),n.includes("-")){if(!o)return i(e);var r=customElements.get(n);if(r){var c=Array.from(document.querySelectorAll(n));c.map(function(n){n.disconnectedCallback(),n.methods.map(function(t){delete n[t]})}),r.class=u(e),c.map(function(n){return n.connectedCallback()})}else customElements.define(n,r=i(e));return r}};var i=function(n){var t=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.connectedCallback=function(){return function(n,r){var o,i,u=this;return i=t.class,o=i.prototype,y(this),this.state=this.state||{},this.methods=Object.getOwnPropertyNames(o).filter(function(n){return!(n in c)}).map(function(n){return u[n]=o[n].bind(u),n}),(this.connected||e).call(this,this,this.state).then(function(){return this.initialised=!0,this.render(),n()}.$asyncbind(this,r),r)}.$asyncbind(this,!0)},t.prototype.render=function(){return function(n,e){var r;return r=t.class.prototype,this.initialised?r.render.call(this,this,this.state).then(function(){return n()}.$asyncbind(this,e),e):n()}.$asyncbind(this,!0)},t.prototype.disconnectedCallback=function(){(this.disconnected||e).call(this,this,this.state),this.dispatchEvent(new CustomEvent("disconnected")),this.initialised=!1},t}(r);return t.class=u(n),t},c={length:1,prototype:1,name:1,render:1}}(a={exports:{}},a.exports),a.exports),v=(l="[ri/components]",function(t){if(!i.console||!console.log.apply)return t;n.arr(arguments[2])&&(arguments[2]=arguments[2].length);var r=e.arr(arguments),o="[log]["+(new Date).toISOString()+"]"+l;return r.unshift(o.grey?o.grey:o),console.log.apply(console,r),t});return function(n){return o?(v("creating"),Node.prototype.render=function(){var t=this.nodeName.toLowerCase();t.includes("-")&&(this.fn$=this.fn$||n.subscribe(t).map(function(n){return m(t,n)}))},Node.prototype.draw=function(){this.render()},function(n){document.body?n():document.addEventListener("DOMContentLoaded",n.bind(this))}(function(){return Array.from(document.querySelectorAll("*")).filter(function(n){return n.nodeName.includes("-")}).map(function(n){return n.render()})}),n):n}}();
